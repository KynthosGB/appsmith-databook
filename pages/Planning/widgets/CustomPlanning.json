{
  "backgroundColor": "#FFFFFF",
  "borderColor": "#E0DEDE",
  "borderRadius": "{{appsmith.theme.borderRadius.appBorderRadius}}",
  "borderWidth": "1",
  "bottomRow": 95,
  "boxShadow": "{{appsmith.theme.boxShadow.appBoxShadow}}",
  "defaultModel": "{{JSPlanningSuivi.getModel()}}",
  "dynamicBindingPathList": [
    {
      "key": "theme"
    },
    {
      "key": "borderRadius"
    },
    {
      "key": "boxShadow"
    },
    {
      "key": "defaultModel"
    }
  ],
  "dynamicHeight": "FIXED",
  "dynamicPropertyPathList": [],
  "dynamicTriggerPathList": [],
  "events": [],
  "isCanvas": false,
  "isLoading": false,
  "isSearchWildcard": true,
  "isVisible": true,
  "key": "ctx98s9hxm",
  "leftColumn": 1,
  "maxDynamicHeight": 9000,
  "minDynamicHeight": 4,
  "mobileBottomRow": 40,
  "mobileLeftColumn": 19,
  "mobileRightColumn": 42,
  "mobileTopRow": 10,
  "needsErrorInfo": false,
  "parentColumnSpace": 20.25,
  "parentId": "0",
  "parentRowSpace": 10,
  "renderMode": "CANVAS",
  "rightColumn": 63,
  "srcDoc": {
    "css": "@charset \"UTF-8\";\n#root {\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", sans-serif;\n  font-size: 11px;\n  color: #111827;\n  padding: 8px;\n  overflow-y: auto; /* scroll vertical */\n  overflow-x: hidden; /* pas de scroll horizontal ici */\n}\n\n/* LÃ©gende en haut (reste fixe) */\n.planning-legend {\n  margin-bottom: 6px;\n  display: flex;\n  gap: 12px;\n  font-size: 11px;\n  color: #4b5563;\n}\n\n.planning-legend-item {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.planning-legend-color {\n  width: 10px;\n  height: 10px;\n  border-radius: 2px;\n  border: 1px solid #d1d5db;\n}\n\n/* Bloc principal du planning */\n.planning-root {\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n}\n\n/* Deux colonnes : labels Ã  gauche, calendrier Ã  droite */\n.planning-main {\n  display: flex;\n  align-items: stretch;\n}\n\n/* Colonne gauche : appareils (ne scrolle pas horizontalement) */\n.planning-col-labels {\n  flex: 0 0 220px; /* largeur fixe */\n}\n\n/* Colonne droite : jours (scrolle en horizontal) */\n.planning-col-days {\n  flex: 1;\n  overflow-x: auto;\n  overflow-y: hidden;\n}\n\n/* En-tÃªte \"Appareil\" */\n.planning-header-label {\n  padding: 4px 6px;\n  font-weight: 600;\n  background: #f3f4f6;\n  border-right: 1px solid #d1d5db;\n  border-bottom: 1px solid #d1d5db;\n}\n\n/* LibellÃ© appareil ligne */\n.planning-row-label {\n  padding: 3px 6px;\n  border-right: 1px solid #d1d5db;\n  border-bottom: 1px solid #e5e7eb;\n  background: #f9fafb;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/* Grille des jours (entÃªte + lignes) */\n.planning-days-header,\n.planning-days-row {\n  display: grid;\n  grid-auto-flow: column;\n  grid-auto-columns: 24px; /* largeur d'un jour */\n}\n\n/* Cellules jours entÃªte */\n.planning-header-day {\n  text-align: center;\n  padding: 4px 0;\n  font-weight: 500;\n  border-right: 1px solid #e5e7eb;\n  border-bottom: 1px solid #d1d5db;\n  background: #f9fafb;\n  box-sizing: border-box;\n}\n\n/* Cellules jours corps */\n.planning-day-cell {\n  padding: 2px;\n  border-right: 1px solid #e5e7eb;\n  border-bottom: 1px solid #e5e7eb;\n  text-align: center;\n  box-sizing: border-box;\n  position: relative; /* pour le drapeau ðŸš© */\n}\n\n/* Lettre (P, N, â€¦) */\n.planning-letter {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  font-weight: 600;\n  border-radius: 2px;\n  font-size: 13px;\n}\n\n/* Drapeau dÃ©lai */\n.planning-flag {\n  position: absolute;\n  top: 1px;\n  right: 1px;\n  font-size: 12px;\n}",
    "html": "<div id=\"root\"></div>",
    "js": "import React from \"https://cdn.jsdelivr.net/npm/react@18.2.0/+esm\";\nimport ReactDOM from \"https://cdn.jsdelivr.net/npm/react-dom@18.2.0/+esm\";\nfunction buildDays(startDateStr, daysCount, todayStr) {\n  const out = [];\n  if (!startDateStr) return out;\n  const [y, m, d] = startDateStr.split(\"-\").map(Number);\n  const start = new Date(Date.UTC(y, m - 1, d));\n  for (let i = 0; i < daysCount; i++) {\n    const day = new Date(start);\n    day.setUTCDate(start.getUTCDate() + i);\n    const yyyy = day.getUTCFullYear();\n    const mm = String(day.getUTCMonth() + 1).padStart(2, \"0\");\n    const dd = String(day.getUTCDate()).toString().padStart(2, \"0\");\n    const iso = `${yyyy}-${mm}-${dd}`;\n    out.push({\n      key: iso,\n      label: dd,\n      isToday: iso === todayStr\n    });\n  }\n  return out;\n}\nfunction App() {\n  const {\n    rows = [],\n    startDate,\n    days = 30,\n    today\n  } = appsmith.model || {};\n  const dayList = buildDays(startDate, days, today);\n\n  // largeur totale de la bande de jours\n  const daysWidth = dayList.length * 24; // 24px = grid-auto-columns\n\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"planning-legend\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"planning-legend-item\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"planning-legend-color\",\n    style: {\n      backgroundColor: \"#22c55e\"\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", null, \"Termin\\xE9\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"planning-legend-item\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"planning-legend-color\",\n    style: {\n      backgroundColor: \"#eab308\"\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", null, \"En cours / attente\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"planning-legend-item\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"planning-legend-color\",\n    style: {\n      backgroundColor: \"#ef4444\"\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", null, \"\\xC0 faire\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"planning-root\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"planning-main\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"planning-col-labels\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"planning-header-label\"\n  }, \"Appareil\"), rows.map(row => /*#__PURE__*/React.createElement(\"div\", {\n    key: row.appareil,\n    className: \"planning-row-label\"\n  }, row.label))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"planning-col-days\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"planning-days-header\",\n    style: {\n      width: daysWidth\n    }\n  }, dayList.map(d => /*#__PURE__*/React.createElement(\"div\", {\n    key: d.key,\n    className: \"planning-header-day\",\n    style: {\n      borderLeft: d.isToday ? \"2px solid #ef4444\" : \"1px solid #e5e7eb\",\n      backgroundColor: d.isToday ? \"#fee2e2\" : undefined\n    }\n  }, d.label))), rows.map(row => {\n    const eventMap = {};\n    (row.events || []).forEach(ev => {\n      eventMap[ev.date] = ev;\n    });\n    const delaiStr = row.delai ? String(row.delai).slice(0, 10) : null;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: row.appareil,\n      className: \"planning-days-row\",\n      style: {\n        width: daysWidth\n      }\n    }, dayList.map(d => {\n      const ev = eventMap[d.key];\n      const borderLeft = d.isToday ? \"2px solid #ef4444\" : \"1px solid #e5e7eb\";\n      const isDelai = delaiStr && d.key === delaiStr;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: d.key,\n        className: \"planning-day-cell\",\n        style: {\n          borderLeft\n        }\n      }, ev && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"planning-letter\",\n        style: {\n          backgroundColor: ev.color\n        },\n        title: `${ev.lettre} - ${ev.statut}`\n      }, ev.lettre), isDelai && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"planning-flag\",\n        title: \"D\\xE9lai\"\n      }, \"\\uD83D\\uDEA9\"));\n    }));\n  })))));\n}\nfunction render() {\n  const rootEl = document.getElementById(\"root\");\n  if (!rootEl) return;\n  ReactDOM.render(/*#__PURE__*/React.createElement(App, null), rootEl);\n}\nappsmith.onReady(render);\nappsmith.onModelChange(render);"
  },
  "theme": "{{appsmith.theme}}",
  "topRow": 2,
  "type": "CUSTOM_WIDGET",
  "uncompiledSrcDoc": {
    "css": "#root {\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\",\n    sans-serif;\n  font-size: 11px;\n  color: #111827;\n  padding: 8px;\n  overflow-y: auto;   /* scroll vertical */\n  overflow-x: hidden; /* pas de scroll horizontal ici */\n}\n\n/* LÃ©gende en haut (reste fixe) */\n.planning-legend {\n  margin-bottom: 6px;\n  display: flex;\n  gap: 12px;\n  font-size: 11px;\n  color: #4b5563;\n}\n.planning-legend-item {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n.planning-legend-color {\n  width: 10px;\n  height: 10px;\n  border-radius: 2px;\n  border: 1px solid #d1d5db;\n}\n\n/* Bloc principal du planning */\n.planning-root {\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n}\n\n/* Deux colonnes : labels Ã  gauche, calendrier Ã  droite */\n.planning-main {\n  display: flex;\n  align-items: stretch;\n}\n\n/* Colonne gauche : appareils (ne scrolle pas horizontalement) */\n.planning-col-labels {\n  flex: 0 0 220px; /* largeur fixe */\n}\n\n/* Colonne droite : jours (scrolle en horizontal) */\n.planning-col-days {\n  flex: 1;\n  overflow-x: auto;\n  overflow-y: hidden;\n}\n\n/* En-tÃªte \"Appareil\" */\n.planning-header-label {\n  padding: 4px 6px;\n  font-weight: 600;\n  background: #f3f4f6;\n  border-right: 1px solid #d1d5db;\n  border-bottom: 1px solid #d1d5db;\n}\n\n/* LibellÃ© appareil ligne */\n.planning-row-label {\n  padding: 3px 6px;\n  border-right: 1px solid #d1d5db;\n  border-bottom: 1px solid #e5e7eb;\n  background: #f9fafb;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/* Grille des jours (entÃªte + lignes) */\n.planning-days-header,\n.planning-days-row {\n  display: grid;\n  grid-auto-flow: column;\n  grid-auto-columns: 24px; /* largeur d'un jour */\n}\n\n/* Cellules jours entÃªte */\n.planning-header-day {\n  text-align: center;\n  padding: 4px 0;\n  font-weight: 500;\n  border-right: 1px solid #e5e7eb;\n  border-bottom: 1px solid #d1d5db;\n  background: #f9fafb;\n  box-sizing: border-box;\n}\n\n/* Cellules jours corps */\n.planning-day-cell {\n\tpadding: 2px;\n  border-right: 1px solid #e5e7eb;\n  border-bottom: 1px solid #e5e7eb;\n  text-align: center;\n  box-sizing: border-box;\n  position: relative; /* pour le drapeau ðŸš© */\n}\n\n/* Lettre (P, N, â€¦) */\n.planning-letter {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  font-weight: 600;\n  border-radius: 2px;\n\tfont-size: 13px\n}\n\n/* Drapeau dÃ©lai */\n.planning-flag {\n  position: absolute;\n  top: 1px;\n  right: 1px;\n  font-size: 12px;\n}\n",
    "html": "<div id=\"root\"></div>",
    "js": "import React from \"https://cdn.jsdelivr.net/npm/react@18.2.0/+esm\";\nimport ReactDOM from \"https://cdn.jsdelivr.net/npm/react-dom@18.2.0/+esm\";\n\nfunction buildDays(startDateStr, daysCount, todayStr) {\n  const out = [];\n  if (!startDateStr) return out;\n\n  const [y, m, d] = startDateStr.split(\"-\").map(Number);\n  const start = new Date(Date.UTC(y, m - 1, d));\n\n  for (let i = 0; i < daysCount; i++) {\n    const day = new Date(start);\n    day.setUTCDate(start.getUTCDate() + i);\n\n    const yyyy = day.getUTCFullYear();\n    const mm = String(day.getUTCMonth() + 1).padStart(2, \"0\");\n    const dd = String(day.getUTCDate()).toString().padStart(2, \"0\");\n    const iso = `${yyyy}-${mm}-${dd}`;\n\n    out.push({\n      key: iso,\n      label: dd,\n      isToday: iso === todayStr,\n    });\n  }\n\n  return out;\n}\n\nfunction App() {\n  const { rows = [], startDate, days = 30, today } = appsmith.model || {};\n  const dayList = buildDays(startDate, days, today);\n\n  // largeur totale de la bande de jours\n  const daysWidth = dayList.length * 24; // 24px = grid-auto-columns\n\n  return (\n    <div>\n      {/* LÃ©gende en haut (ne bouge pas au scroll) */}\n      <div className=\"planning-legend\">\n        <div className=\"planning-legend-item\">\n          <span\n            className=\"planning-legend-color\"\n            style={{ backgroundColor: \"#22c55e\" }}\n          ></span>\n          <span>TerminÃ©</span>\n        </div>\n        <div className=\"planning-legend-item\">\n          <span\n            className=\"planning-legend-color\"\n            style={{ backgroundColor: \"#eab308\" }}\n          ></span>\n          <span>En cours / attente</span>\n        </div>\n        <div className=\"planning-legend-item\">\n          <span\n            className=\"planning-legend-color\"\n            style={{ backgroundColor: \"#ef4444\" }}\n          ></span>\n          <span>Ã€ faire</span>\n        </div>\n      </div>\n\n      {/* Planning */}\n      <div className=\"planning-root\">\n        <div className=\"planning-main\">\n          {/* Colonne fixe : Appareils */}\n          <div className=\"planning-col-labels\">\n            <div className=\"planning-header-label\">Appareil</div>\n            {rows.map((row) => (\n              <div key={row.appareil} className=\"planning-row-label\">\n                {row.label}\n              </div>\n            ))}\n          </div>\n\n          {/* Colonne scrollable : jours */}\n          <div className=\"planning-col-days\">\n            {/* En-tÃªte des jours */}\n            <div\n              className=\"planning-days-header\"\n              style={{ width: daysWidth }}\n            >\n              {dayList.map((d) => (\n                <div\n                  key={d.key}\n                  className=\"planning-header-day\"\n                  style={{\n                    borderLeft: d.isToday\n                      ? \"2px solid #ef4444\"\n                      : \"1px solid #e5e7eb\",\n                    backgroundColor: d.isToday ? \"#fee2e2\" : undefined,\n                  }}\n                >\n                  {d.label}\n                </div>\n              ))}\n            </div>\n\n            {/* Lignes d'appareils */}\n            {rows.map((row) => {\n              const eventMap = {};\n              (row.events || []).forEach((ev) => {\n                eventMap[ev.date] = ev;\n              });\n\n              const delaiStr = row.delai ? String(row.delai).slice(0, 10) : null;\n\n              return (\n                <div\n                  key={row.appareil}\n                  className=\"planning-days-row\"\n                  style={{ width: daysWidth }}\n                >\n                  {dayList.map((d) => {\n                    const ev = eventMap[d.key];\n                    const borderLeft = d.isToday\n                      ? \"2px solid #ef4444\"\n                      : \"1px solid #e5e7eb\";\n\n                    const isDelai = delaiStr && d.key === delaiStr;\n\n                    return (\n                      <div\n                        key={d.key}\n                        className=\"planning-day-cell\"\n                        style={{ borderLeft }}\n                      >\n                        {ev && (\n                          <div\n                            className=\"planning-letter\"\n                            style={{ backgroundColor: ev.color }}\n                            title={`${ev.lettre} - ${ev.statut}`}\n                          >\n                            {ev.lettre}\n                          </div>\n                        )}\n\n                        {isDelai && (\n                          <div className=\"planning-flag\" title=\"DÃ©lai\">\n                            ðŸš©\n                          </div>\n                        )}\n                      </div>\n                    );\n                  })}\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction render() {\n  const rootEl = document.getElementById(\"root\");\n  if (!rootEl) return;\n  ReactDOM.render(<App />, rootEl);\n}\n\nappsmith.onReady(render);\nappsmith.onModelChange(render);\n"
  },
  "version": 1,
  "widgetId": "5nqeyv7e5x",
  "widgetName": "CustomPlanning"
}