{
  "gitSyncId": "6900ce0e5fba93519b2b9c51_b53a8332-13d8-4204-829f-29424d2f3869",
  "id": "Fiche appareil_SendToN8n",
  "pluginId": "restapi-plugin",
  "pluginType": "API",
  "unpublishedAction": {
    "actionConfiguration": {
      "autoGeneratedHeaders": [
        {
          "key": "content-type",
          "value": "application/json"
        }
      ],
      "body": "{\n  \"nom_client\": {{DonneesGeneralesAffaire.data[0].nom_client}},\n  \"numero_affaire\": {{CaracteristiquesAppareils.data[0].numero_affaire}},\n  \"reference_client\": {{CaracteristiquesAppareils.data[0].reference_client}},\n  \"nom_appareil\": {{CaracteristiquesAppareils.data[0].nom_appareil}},\n  \"repere_appareil\": {{CaracteristiquesAppareils.data[0].repere_appareil}},\n  \"date_creation_dossier\": {{moment(DonneesGeneralesAffaire.data[0].date_creation_dossier).format(\"DD/MM/YYYY\")}},\n\t\"file_name\": {{\"TRAME\" + CaracteristiquesAppareils.data[0].numero_affaire + CaracteristiquesAppareils.data[0].repere_appareil}},\n\t\"sommaire_tree\": {{ SommaireUI.flatList()\n  .filter(r => r.include)\n  .reduce((acc, r) => {\n    const byId = acc.byId || (acc.byId = {});\n    byId[r.master_id] ||= { id:r.master_id, level:+r.level, no:r.display_no, fr:r.label_fr, en:r.label_en, children:[] };\n    if (r.parent_master_id) {\n      byId[r.parent_master_id] ||= { id:r.parent_master_id, children:[] };\n      byId[r.parent_master_id].children.push(byId[r.master_id]);\n    } else if (+r.level === 1) {\n      (acc.roots ||= []).push(byId[r.master_id]);\n    }\n    return acc;\n  }, {}).roots || [] }},\n  \"job_id\": {{ appsmith.store.jobId }}\n}\n",
      "bodyFormData": [],
      "encodeParamsToggle": true,
      "formData": {
        "apiContentType": "application/json"
      },
      "headers": [],
      "httpMethod": "POST",
      "httpVersion": "HTTP11",
      "paginationType": "NONE",
      "path": "/webhook/appsmith-databook-to-n8n",
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ],
      "queryParameters": [],
      "timeoutInMillisecond": 60000
    },
    "confirmBeforeExecute": false,
    "datasource": {
      "datasourceConfiguration": {
        "url": "https://n8n.kynthos.fr"
      },
      "isAutoGenerated": false,
      "name": "DEFAULT_REST_DATASOURCE",
      "pluginId": "restapi-plugin"
    },
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "name": "SendToN8n",
    "pageId": "Fiche appareil",
    "runBehaviour": "MANUAL",
    "userSetOnLoad": false
  }
}