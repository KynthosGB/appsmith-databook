{
  "gitSyncId": "6915b9d6a2ab6852a3eeef70_87e370ff-5ba8-4d6d-a699-b39730f13969",
  "id": "Administration_QrySaveAlertRule",
  "pluginId": "postgres-plugin",
  "pluginType": "DB",
  "unpublishedAction": {
    "actionConfiguration": {
      "body": "UPDATE public.alert_rules\nSET\n  event_type = '{{ TableAlertRules.updatedRow.event_type ?? TableAlertRules.triggeredRow.event_type }}',\n\n  step_code = CASE\n    WHEN '{{ TableAlertRules.updatedRow.event_type ?? TableAlertRules.triggeredRow.event_type }}' = 'STATUS_CHANGED'\n      THEN NULLIF('{{ TableAlertRules.updatedRow.step_code ?? TableAlertRules.triggeredRow.step_code }}','')\n    ELSE NULL\n  END,\n\n  status_code = CASE\n    WHEN '{{ TableAlertRules.updatedRow.event_type ?? TableAlertRules.triggeredRow.event_type }}' = 'STATUS_CHANGED'\n      THEN NULLIF('{{ TableAlertRules.updatedRow.status_code ?? TableAlertRules.triggeredRow.status_code }}','')\n    ELSE NULL\n  END,\n\n  event_key = CASE\n    WHEN '{{ TableAlertRules.updatedRow.event_type ?? TableAlertRules.triggeredRow.event_type }}' <> 'STATUS_CHANGED'\n      THEN NULLIF('{{ TableAlertRules.updatedRow.event_key ?? TableAlertRules.triggeredRow.event_key }}','')\n    ELSE NULL\n  END,\n\n  event_value = CASE\n    WHEN '{{ TableAlertRules.updatedRow.event_type ?? TableAlertRules.triggeredRow.event_type }}' <> 'STATUS_CHANGED'\n      THEN 'true'\n    ELSE NULL\n  END,\n\n  target_everwin_user_id = CASE\n    WHEN\n      '{{ TableAlertRules.updatedRow.event_type ?? TableAlertRules.triggeredRow.event_type }}' = 'STATUS_CHANGED'\n      AND NULLIF('{{ TableAlertRules.updatedRow.status_code ?? TableAlertRules.triggeredRow.status_code }}','') = 'ATTENTE_CLIENT'\n    THEN NULL\n    ELSE NULLIF('{{ TableAlertRules.updatedRow.target_everwin_user_id ?? TableAlertRules.triggeredRow.target_everwin_user_id }}','')\n  END,\n\n  enabled = {{\n    (() => {\n      const v = TableAlertRules.updatedRow.enabled ?? TableAlertRules.triggeredRow.enabled;\n      if (v === true || v === false) return v;\n      if (v === \"true\") return true;\n      if (v === \"false\") return false;\n      return true;\n    })()\n  }},\n\n  only_on_change = {{\n    (() => {\n      const v = TableAlertRules.updatedRow.only_on_change ?? TableAlertRules.triggeredRow.only_on_change;\n      if (v === true || v === false) return v;\n      if (v === \"true\") return true;\n      if (v === \"false\") return false;\n      return true;\n    })()\n  }},\n\n  throttle_minutes = {{\n    (() => {\n      const v = TableAlertRules.updatedRow.throttle_minutes ?? TableAlertRules.triggeredRow.throttle_minutes;\n      const n = Number(v);\n      return Number.isFinite(n) ? n : 0;\n    })()\n  }},\n\n  description = '{{ ((TableAlertRules.updatedRow.description ?? TableAlertRules.triggeredRow.description) || \"\").replaceAll(\"'\", \"''\") }}',\n  updated_at = now()\n\nWHERE id = '{{ (TableAlertRules.updatedRow?.id ?? TableAlertRules.triggeredRow?.id) }}'::uuid;\n",
      "encodeParamsToggle": true,
      "paginationType": "NONE",
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ],
      "timeoutInMillisecond": 10000
    },
    "confirmBeforeExecute": false,
    "datasource": {
      "id": "Databook - Neon",
      "isAutoGenerated": false,
      "name": "Databook - Neon",
      "pluginId": "postgres-plugin"
    },
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "name": "QrySaveAlertRule",
    "pageId": "Administration",
    "runBehaviour": "MANUAL",
    "userSetOnLoad": false
  }
}